<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Relationship Wrapped - Valentine’s Finale</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        font-family: -apple-system, BlinkMacSystemFont, "San Francisco", Helvetica, Arial, sans-serif;
        overflow: hidden;
        background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
        background-size: 400% 400%;
        animation: bgPulse 15s ease infinite;
        cursor: pointer;
        position: relative;
    }

    @keyframes bgPulse {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    /* Fade-in container */
    #fade-container {
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 2s ease;
    }

    h1 {
        font-size: 90px;
        font-weight: bold;
        text-align: center;
        color: #fff;
        margin: 0;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    p {
        font-size: 28px;
        text-align: center;
        color: #fff;
        margin-top: 20px;
        position: relative;
        z-index: 5;
    }

    /* Hearts */
    .heart {
        position: absolute;
        width: 25px;
        height: 25px;
        background: #ff4b7b;
        transform: rotate(-45deg);
        border-radius: 50%;
        opacity: 0.8;
        animation: floatUp linear infinite;
        z-index: 2;
    }
    .heart::before,
    .heart::after {
        content: '';
        position: absolute;
        width: 25px;
        height: 25px;
        background: #ff4b7b;
        border-radius: 50%;
    }
    .heart::before { top: -12.5px; left: 0; }
    .heart::after { left: 12.5px; top: 0; }

    @keyframes floatUp {
        0% { transform: translate(0,0) rotate(-45deg) scale(1); opacity: 0.8; }
        50% { transform: translate(var(--randX), -50vh) rotate(-25deg) scale(1.2); opacity: 0.6; }
        100% { transform: translate(var(--randX), -120vh) rotate(-45deg) scale(1); opacity: 0; }
    }

    /* Sparkles */
    .sparkle {
        position: absolute;
        width: 5px;
        height: 5px;
        background: #fff;
        border-radius: 50%;
        opacity: 0.8;
        animation: sparkleAnim linear infinite;
        z-index: 1;
    }

    @keyframes sparkleAnim {
        0% { transform: translate(0,0) scale(1); opacity: 0.5; }
        50% { transform: translate(var(--randX), var(--randY)) scale(1.5); opacity: 1; }
        100% { transform: translate(var(--randX2), var(--randY2)) scale(1); opacity: 0; }
    }

    /* Now Playing */
    #now-playing {
        position: fixed;
        top: 20px;
        left: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
        background: rgba(0,0,0,0.3);
        padding: 6px 12px;
        border-radius: 20px;
        font-weight: bold;
        z-index: 100;
    }

    #cd-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        animation: spin 3s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    #song-title {
        font-size: 14px;
        white-space: nowrap;
        color: #fff;
    }
</style>
</head>
<body>

<!-- Now Playing -->
<div id="now-playing">
    <img src="CD_icon.svg" id="cd-icon" alt="CD">
    <div id="song-title">Now Playing: Twenty one pilots - Tear in my heart</div>
</div>

<audio id="bg-music" src="Twenty one pilots - Tear in my heart.m4a" loop></audio>

<!-- Fade-in content wrapper -->
<div id="fade-container">
    <div class="screen" id="screen">
        <h1>HAPPY (late) VALENTINE’S BABY</h1>
        <p>I love you so effing much.</p>
    </div>
</div>

<script>
const music = document.getElementById("bg-music");
const fadeContainer = document.getElementById("fade-container");

// Music fade
function fadeIn(audio, duration=2000) {
    audio.volume = 0;
    audio.play();
    let step = 50;
    let increment = step/duration;
    let vol = 0;
    const fade = setInterval(() => {
        vol += increment;
        if(vol>=1){audio.volume=0.5; clearInterval(fade);} else audio.volume=vol;
    }, step);
}
function fadeOut(audio, duration=2000, callback){
    let step = 50;
    let decrement = step/duration;
    let vol = audio.volume;
    const fade = setInterval(()=>{vol -= decrement;
        if(vol<=0){audio.volume=0; audio.pause(); clearInterval(fade); if(callback) callback();}
        else audio.volume = vol;
    }, step);
}

// Fade in screen and music
window.addEventListener('DOMContentLoaded', () => {
    fadeIn(music,2000);
    // small delay before fade-in to allow DOM paint
    setTimeout(() => {
        fadeContainer.style.opacity = 1;
    }, 50);

    createHearts(120);
    createSparkles(60);
});

// Click anywhere to end
fadeContainer.addEventListener('click', ()=>{
    fadeOut(music,600,()=>{ alert("Give me a big fat kiss now."); });
});

// Floating hearts
function createHearts(num){
    for(let i=0;i<num;i++){
        const heart = document.createElement('div');
        heart.classList.add('heart');
        const size = Math.random()*20 + 15;
        heart.style.width = `${size}px`;
        heart.style.height = `${size}px`;
        heart.style.setProperty('--randX', `${Math.random()*200 - 100}vw`);
        heart.style.left = `${Math.random()*100}vw`;
        heart.style.top = `${Math.random()*100}vh`;
        heart.style.animationDuration = `${Math.random()*6 + 4}s`;
        heart.style.opacity = Math.random()*0.8 + 0.2;
        document.body.appendChild(heart);
    }
}

// Sparkles
function createSparkles(num){
    for(let i=0;i<num;i++){
        const sparkle = document.createElement('div');
        sparkle.classList.add('sparkle');
        sparkle.style.left = `${Math.random()*100}vw`;
        sparkle.style.top = `${Math.random()*100}vh`;
        sparkle.style.setProperty('--randX', `${Math.random()*50-25}vw`);
        sparkle.style.setProperty('--randY', `${Math.random()*50-25}vh`);
        sparkle.style.setProperty('--randX2', `${Math.random()*50-25}vw`);
        sparkle.style.setProperty('--randY2', `${Math.random()*50-25}vh`);
        sparkle.style.animationDuration = `${Math.random()*4 + 3}s`;
        sparkle.style.opacity = Math.random()*0.8+0.2;
        document.body.appendChild(sparkle);
    }
}
</script>

</body>
</html>
